<!-- <!DOCTYPE html>
<html>
<head>
    <title>ProTag - {{producer.producer_name}}</title>

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <link href="/static/style.css" rel="stylesheet"></link>
  <link href="http://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">
  <script src="https://code.jquery.com/jquery.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/d3/4.1.1/d3.min.js"></script> 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.2.1/Chart.js"></script>
  <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>   
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>

  <meta charset="utf-8">
<style>
.node {
  cursor: pointer;
}

.node circle {
  fill: #fff;
  stroke: steelblue;
  stroke-width: 1.5px;
}

.node text {
  font: 10px sans-serif;
}

.link {
  fill: none;
  stroke: #ccc;
  stroke-width: 1.5px;
}
</style>

</head>

<body>

<div class="topnav">
      <a class="active" href="/">Home</a>
      <a href="/performers">Performers</a>
      <a href="/producers">Producers</a>
      <a href="/network">Network</a>
      <a href="/resume">Hire Me!</a>
    </div>  -->

{% extends "base.html" %}

{% block title %}ProTag - {{producer.producer_name}}{% endblock %}

{% block content %}
    <h1 align = "center">{{producer.producer_name}}
        {% if album_years[-1]|int < 2008 %}
          INDUSTRY VET
        {% else %}
          INDUSTRY ROOKIE
        {% endif %}
</h1>

    {% if producer.songs %}
        <ul>
        <!-- alt = message when hovering over -->
        <!-- producer's image -->
        <img src="{{ producer.producer_img_url }}" width="250" height="200" alt="{{ producer.producer_name }}">
        <!-- autoplay: https://www.youtube.com/embed/gN-JxixTeqg?autoplay=1 -->
        {% if producer.producer_tag_url %}
            Signature: 
            <iframe width="40" height="40" src="https://www.youtube.com/embed/{{ producer.producer_tag_url }}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </iframe>
            <br>
            <br>
        {% endif %}
        <br>
        <br>
        {{ bio }}
        <br>
        <br>
        <h3>Number of songs {{ producer.producer_name }} has produced by performer</h3>

    <div class="producer-to-performer-chart">
    <canvas id="donutChart"></canvas>
    <div id="donutLegend" class="chart-legend"></div>
        <div class="frequency-chart">
        <canvas id="lineChart"></canvas>
        <div id="lineLegend" class="chart-legend"></div>
        </div>
  </div>


<!-- Chart 2 -->
  <script>
    const options = {
      responsive: true
    };

    // Make Donut Chart of percent of different types of Melons
    let ctx_donut = $("#donutChart").get(0).getContext("2d");

    $.get("/producer-frequency.json", function (data) {
      let myDonutChart = new Chart(ctx_donut, {
                                              type: 'doughnut',
                                              data: data,
                                              options: options
                                            });
      // $('#donutLegend').html(myDonutChart.generateLegend());
    });

        // const options = {
        //   responsive: true
        // };

        // Make Line Chart of Melon Sales over time
        let ctx_line = $("#lineChart").get(0).getContext("2d");

        $.get("/producer-productivity.json", function (data) {
          let myLineChart = Chart.Line(ctx_line, {
                                        data: data,
                                        options: options
                                    });
          // $("#lineLegend").html(myLineChart.generateLegend());
        });

      </script>


    <br>
<!-- return every song producer has producer by album and year -->
      <h2>Albums</h2>
      <br>
        {% for year in album_years %}
                <h2>{{year}}</h2>
                {% for album in producer.albums %}
                    {% if album.album_release_date.strftime("%Y") == year %}
                        <h3><a href="/albums/{{ album.album_id }}">{{ album.album_title }}</a> - <a href="/performers/{{ album.performers[0].performer_id }}">{{ album.performers[0].performer_name }}</a></h3>
                        <img src="{{ album.cover_art_url }}" width="250" height="200" alt="{{ album.album_title }}">
                        {% for song in album.songs %} 
                            {% if producer in song.producers %}
                            <li>
                            <a href="/songs/{{ song.song_id }}">{{ song.song_title }}</a>
                            </li>
                            {% endif %}
                        {% endfor %}
                        <br>
                    {% endif %}
                {% endfor %}
        {% endfor %}
<br>
      <h2>Singles</h2>
      <br>
              {% for year in song_years %}
                <h2>{{year}}</h2>
                {% for song in producer.songs %}
                    {% if song.song_release_date.strftime("%Y") == year %} 
                          {% if not song.albums %}
                          <li>
                          <a href="/songs/{{ song.song_id }}">{{ song.song_title }}</a> - 
                          <a href="/performers/{{ song.performers[0].performer_id }}">{{ song.performers[0].performer_name }}</a>
                          </li>
                          {% endif %}
                    {% endif %}
                {% endfor %}
              <br>
        {% endfor %}
    {% endif %}
<!-- add songs not on albums and songs/albums without release dates -->
{% endblock %}